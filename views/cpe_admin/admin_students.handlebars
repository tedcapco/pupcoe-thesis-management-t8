<head>
  <title>CpERMS | Students</title>
  <!-- LOCAL -->
  <link rel="stylesheet" type="text/css" href="../css/style.css">
</head>

{{> header_admin }}

<!--admin students-->
<br>
<div style="width: 80%; position: absolute; right: 0;">
  <div class="d-flex justify-content-center small">
    <div class="container">
      <div class="row">
        <!--tabs-->
        <div class="navbar navbar-static">
          <div class="navbar-collapse collapse">
            <!--inside nav-->
            <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#batch2014" role="tab" aria-selected="true">2014</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#batch2015" role="tab" aria-selected="true">2015</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#batch2016" role="tab" aria-selected="true">2016</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#batch2017" role="tab" aria-selected="true">2017</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#batch2018" role="tab" aria-selected="true">2018</a>
              </li>
            </ul><!--inside nav-->
          </div>
        </div>
      </div>
      <br>
      <!--tab content-->
      <div class="tab-content well">
        <!--section_1-->
        <div id="batch2014" class="tab-pane fade in active">
          <div class="d-flex">
            <div class="col-md-12 col-sm-12">
              <h4>Batch 2014</h4>
              <hr class="botm-line">
            </div>
          </div>
          <div class="d-flex justify-content-center">
            <div class="col-md-12 col-sm-12">
              <form method="post" action="/students/settings">
                {{!-- <select style="height: 2.5em" class="form-control gray" name="class_id" class="form-control" id="classhandled" required>
                  {{#each classHandled}}
                  <option hidden> SECTION</option>
                  <option value ="{{this.id}}">Section: {{this.section}} - Batch: {{this.batch_year}}</option>
                  {{/each}}
                </select>
                <input id='submitClassId' type="submit" name="submit" value="Submit"hidden><br> --}}
                <table class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr class="info center">
                      <th style="width: 10%">Number</th>
                      <th style="width: 10%">Section</th>
                      <th>Name</th>
                      <th style="width: 20%">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                      {{#each batch2014}}
                    <tr class="center">
                        <td></td>
                        <td>{{section}}</td>
                        <td>{{first_name}} {{middle_name}} {{last_name}}</td>
                        <td class="id" hidden>{{student_id}}</td>
                        <td class="fname" hidden>{{first_name}}</td>
                        <td class="mname" hidden>{{middle_name}}</td>
                        <td class="lname" hidden>{{last_name}}</td>
                        <td class="contact" hidden>{{contact_no}}</td>
                        <td class="email" hidden>{{email}}</td>
                      <td>
                        <button type="button" class="studentUpdate btn btn-success btn-sm" data-toggle="modal" data-target="#update"><i class="fa fa-pencil"></i></button>
                        <button type="button" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i></button>
                      </td>
                      </tr>
                      {{/each}}
                  </tbody>
                </table>
              </form>
            </div>
          </div>
        </div><!--section_1-->
        <!--section_1-->
        <div id="batch2015" class="tab-pane fade">
          <div class="d-flex">
            <div class="col-md-12 col-sm-12">
              <h4>Batch 2015</h4>
              <hr class="botm-line">
            </div>
          </div>
          <div class="d-flex justify-content-center">
            <div class="col-md-12 col-sm-12">
              <form method="post" action="/students/settings">
                {{!-- <select style="height: 2.5em" class="form-control gray" name="class_id" class="form-control" id="classhandled" required>
                  {{#each classHandled}}
                  <option hidden> SECTION</option>
                  <option value ="{{this.id}}">Section: {{this.section}} - Batch: {{this.batch_year}}</option>
                  {{/each}}
                </select>
                <input id='submitClassId' type="submit" name="submit" value="Submit"hidden><br> --}}
                <table class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr class="info center">
                      <th style="width: 10%">Number</th>
                      <th style="width: 10%">Section</th>
                      <th>Name</th>
                      <th style="width: 20%">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                      {{#each batch2015}}
                    <tr class="center">
                        <td></td>
                        <td>{{section}}</td>
                        <td>{{first_name}} {{middle_name}} {{last_name}}</td>
                        <td class="id" hidden>{{id}}</td>
                        <td class="fname" hidden>{{first_name}}</td>
                        <td class="mname" hidden>{{middle_name}}</td>
                        <td class="lname" hidden>{{last_name}}</td>
                        <td class="contact" hidden>{{contact_no}}</td>
                        <td class="email" hidden>{{email}}</td>
                      <td>
                        <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#update"><i class="fa fa-pencil"></i></button>
                        <button type="button" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i></button>
                      </td>
                      </tr>
                      {{/each}}
                  </tbody>
                </table>
              </form>
            </div>
          </div>
        </div><!--section_1-->
        <!--section_1-->
        <div id="batch2016" class="tab-pane fade">
          <div class="d-flex">
            <div class="col-md-12 col-sm-12">
              <h4>Batch 2016</h4>
              <hr class="botm-line">
            </div>
          </div>
          <div class="d-flex justify-content-center">
            <div class="col-md-12 col-sm-12">
              <form method="post" action="/students/settings">
                {{!-- <select style="height: 2.5em" class="form-control gray" name="class_id" class="form-control" id="classhandled" required>
                  {{#each classHandled}}
                  <option hidden> SECTION</option>
                  <option value ="{{this.id}}">Section: {{this.section}} - Batch: {{this.batch_year}}</option>
                  {{/each}}
                </select>
                <input id='submitClassId' type="submit" name="submit" value="Submit"hidden><br> --}}
                <table class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr class="info center">
                      <th style="width: 10%">Number</th>
                      <th style="width: 10%">Section</th>
                      <th>Name</th>
                      <th style="width: 20%">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                      {{#each batch2016}}
                    <tr class="center">
                        <td></td>
                        <td>{{section}}</td>
                        <td>{{first_name}} {{middle_name}} {{last_name}}</td>
                        <td class="id" hidden>{{id}}</td>
                        <td class="fname" hidden>{{first_name}}</td>
                        <td class="mname" hidden>{{middle_name}}</td>
                        <td class="lname" hidden>{{last_name}}</td>
                        <td class="contact" hidden>{{contact_no}}</td>
                        <td class="email" hidden>{{email}}</td>
                      <td>
                        <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#update"><i class="fa fa-pencil"></i></button>
                        <button type="button" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i></button>
                      </td>
                      </tr>
                      {{/each}}
                  </tbody>
                </table>
              </form>
            </div>
          </div>
        </div><!--section_1-->
        <!--section_1-->
        <div id="batch2017" class="tab-pane fade">
          <div class="d-flex">
            <div class="col-md-12 col-sm-12">
              <h4>Batch 2017</h4>
              <hr class="botm-line">
            </div>
          </div>
          <div class="d-flex justify-content-center">
            <div class="col-md-12 col-sm-12">
              <form method="post" action="/students/settings">
                {{!-- <select style="height: 2.5em" class="form-control gray" name="class_id" class="form-control" id="classhandled" required>
                  {{#each classHandled}}
                  <option hidden> SECTION</option>
                  <option value ="{{this.id}}">Section: {{this.section}} - Batch: {{this.batch_year}}</option>
                  {{/each}}
                </select>
                <input id='submitClassId' type="submit" name="submit" value="Submit"hidden><br> --}}
                <table class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr class="info center">
                      <th style="width: 10%">Number</th>
                      <th style="width: 10%">Section</th>
                      <th>Name</th>
                      <th style="width: 20%">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                      {{#each batch2017}}
                    <tr class="center">
                        <td></td>
                        <td>{{section}}</td>
                        <td>{{first_name}} {{middle_name}} {{last_name}}</td>
                        <td class="id" hidden>{{id}}</td>
                        <td class="fname" hidden>{{first_name}}</td>
                        <td class="mname" hidden>{{middle_name}}</td>
                        <td class="lname" hidden>{{last_name}}</td>
                        <td class="contact" hidden>{{contact_no}}</td>
                        <td class="email" hidden>{{email}}</td>
                      <td>
                        <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#update"><i class="fa fa-pencil"></i></button>
                        <button type="button" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i></button>
                      </td>
                      </tr>
                      {{/each}}
                  </tbody>
                </table>
              </form>
            </div>
          </div>
        </div><!--section_1-->
        <!--section_1-->
        <div id="batch2018" class="tab-pane fade">
          <div class="d-flex">
            <div class="col-md-12 col-sm-12">
              <h4>Batch 2018</h4>
              <hr class="botm-line">
            </div>
          </div>
          <div class="d-flex justify-content-center">
            <div class="col-md-12 col-sm-12">
              <form method="post" action="/students/settings">
                {{!-- <select style="height: 2.5em" class="form-control gray" name="class_id" class="form-control" id="classhandled" required>
                  {{#each classHandled}}
                  <option hidden> SECTION</option>
                  <option value ="{{this.id}}">Section: {{this.section}} - Batch: {{this.batch_year}}</option>
                  {{/each}}
                </select>
                <input id='submitClassId' type="submit" name="submit" value="Submit"hidden><br> --}}
                <table class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr class="info center">
                      <th style="width: 10%">Number</th>
                      <th style="width: 10%">Section</th>
                      <th>Name</th>
                      <th style="width: 20%">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                      {{#each batch2018}}
                    <tr class="center">
                        <td></td>
                        <td>{{section}}</td>
                        <td>{{first_name}} {{middle_name}} {{last_name}}</td>
                        <td class="id" hidden>{{id}}</td>
                        <td class="fname" hidden>{{first_name}}</td>
                        <td class="mname" hidden>{{middle_name}}</td>
                        <td class="lname" hidden>{{last_name}}</td>
                        <td class="contact" hidden>{{contact_no}}</td>
                        <td class="email" hidden>{{email}}</td>
                      <td>
                        <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#update"><i class="fa fa-pencil"></i></button>
                        <button type="button" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i></button>
                      </td>
                      </tr>
                      {{/each}}
                  </tbody>
                </table>
              </form>
            </div>
          </div>
        </div><!--section_1-->
      </div><!--tab content-->
    </div>
  </div>
</div>
<!--admin students-->

<!--MODAL-FORM update-->
<div class="modal fade small" id="update" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title"><strong> Update Student Info</strong></h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form method="post" action="/admin/students/update">
          <div class="form-group">
               <input id="id0" value="" type="text" name="user_id" class="form-control" hidden>
            Class
            <div class="form-group">
               <select style="height: 2.5em" class="form-control" name="class_id" required>
                {{#each classes}}
                  <option value="{{id}}">Section: {{section}} - Batch {{batch_year}}</option>
                 {{/each}} 
               </select>
            </div>
            First Name
            <div class="form-group">
               <input type="text" id="fname0" name="first_name" class="form-control" placeholder="First Name" value="">
            </div>
            Middle Name
            <div class="form-group">
               <input type="text" id="mname0" name="middle_name" class="form-control" placeholder="Middle Name" value="">
            </div>
            Last Name
            <div class="form-group">
               <input type="text" id="lname0" name="last_name" class="form-control" placeholder="Last Name" value="">
            </div>
            Contact Number
            <div class="form-group">
               <input type="text" id="contact0" name="contact_no" class="form-control" placeholder="Contact Number" value="">
            </div>
            Email Address
            <div class="form-group">
               <input type="text" id="email0" name="email" class="form-control" placeholder="Email Address" value="">
            </div>
            <div class="pull-right">
              <button type="submit" class="btn btn-success btn-sm" id="loading" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Please wait..."> Update</button>
              <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Close</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  $('.studentUpdate').click(function() {
    var id = $(this).closest('tr').find('.id').text();
    $('#id0').val(id);
    var section = $(this).closest('tr').find('.section').text();
    $('#section0').val(section);
    var fname = $(this).closest('tr').find('.fname').text();
    $('#fname0').val(fname);
    console.log(fname);
    var mname = $(this).closest('tr').find('.mname').text();
    $('#mname0').val(mname);
    var lname = $(this).closest('tr').find('.lname').text();
    $('#lname0').val(lname);
    var contact = $(this).closest('tr').find('.contact').text();
    $('#contact0').val(contact);
    var email = $(this).closest('tr').find('.email').text();
    $('#email0').val(email);
  });
</script>